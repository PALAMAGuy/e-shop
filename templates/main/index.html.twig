{% extends 'base.html.twig' %}

{% block title %}Hello MainController!{% endblock %}

{% block body %}

<style>

</style>

<div class="container-fluid" style="margin-top:0px">
    <div class="row">
        <div class="col-12 mainFrame" style="padding:0;">
            <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img class="d-block w-100" src="images/1.jpg" alt="First slide">
                    </div>
                    <div class="carousel-item">
                        <img class="d-block w-100" src="images/2.jpg" alt="Second slide">
                    </div>
                    <div class="carousel-item">
                        <img class="d-block w-100" src="images/3.jpg" alt="Third slide">
                    </div>
                </div>
                <ol class="carousel-indicators">
                    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                </ol>
                <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>
    </div>
    <div class="row" style="margin-bottom:40px;">
        <div class="col-2">
        </div>
        <div class="col-8 mainFrame">
            <div class="row"> 
                <div class="col-9" style="background-color:white;">
                    <div class="row">
                        <div class="col-12 divLeftMenu">
                            <p class="textLeftMenu">à découvrir</p>
                            <img src="/images/decouv.png" width="100%" height="auto" style="margin-top:10px;margin-bottom:10px">
                        </div>
                        <div class="col-12 divLeftMenu">
                            <div class="row">
                                <div class="col-2">
                                </div>
                                <div class="col-8">
                                    <p class="textLeftMenu">nouveautés</p>
                                </div>
                                <div class="col-2">
                                    <button type="button" class="btn btn-outline-primary" style="margin-top:20px">Voir +</button>
                                </div>
                            </div>
                            <div class="row">
                                {% for produit in produits %}
                                    {% set nb = 0 %}
                                    {% if nb < 8 %}
                                        <div class="col-3" style="text-align:center">
                                            <a href="{{ path('app_produit_show', {'id': produit.id}) }}">
                                                <img src="/images/produit/{{ produit.img }}" width="100%" height="auto" style="margin-top:20px;margin-bottom:5px">
                                                <p style="color:grey;font-size:12px;height:30px;margin-left:2px;">{{ produit.name }}</p>                                       
                                            </a>
                                            <div class="row">
                                                <div class="col-7">
                                                    <p style="font-weight:800;font-size:17px;color:rgb(10,55,130);text-align:left;margin-left:10px;margin-top:10px;">{{ produit.prix }} €</p>
                                                </div>
                                                <div class="col-5" style="text-align:center">
                                                    {% if produit.nbEnStock > 0 %}
                                                        <form id="form" method="post" action="/produit/{{produit.id}}/addOne">
                                                            <input type="image" src="/images/dispoButton.png" style="width:100%; height:auto;" />                                
                                                        </form>
                                                    {% else %}
                                                        <img src="/images/ndispoButton.png" width="100%" height="auto">
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                        {% set nb = nb + 1 %}
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                        <div class="col-12 divLeftMenu" style="height:250px;border-bottom:0px;">
                            <div class="row" style="margin-bottom:20px">
                                <div class="col-2">
                                </div>
                                <div class="col-8">
                                    <p class="textLeftMenu">NOS SHOPS DE MARQUES</p>
                                </div>
                                <div class="col-2">
                                    <a href="/marque"><button type="button" class="btn btn-outline-primary" style="margin-top:20px">Voir +</button></a>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-1">
                                </div>
                                <div class="col-10">
                                    <div class="row">
                                        {% set i = 0 %}
                                        {% for marque in marques %}
                                            {% if i <= 5 %}
                                                <div class="col-2">
                                                    <a href="{{ path('app_marque_show', {'id': marque.id}) }}"><img src="/images/marques/{{ marque.img }}" width="100%" height="auto"></a>
                                                </div>
                                                {% set i = i + 1 %}
                                            {% endif %}
                                        {% else %}
                                            no records found
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-3" style="background-color:rgb(217,238,244);">
                    <div class="row">
                        <div class="col-12 divRightMenu" style="background-color:rgb(0,150,200)">
                            <a href="/marque/12"><img src="images/apple.png" width="98%" height="auto"></a>
                        </div>
                        <div class="col-12 divRightMenu">
                            <p class="textRightMenu">TechShop Près de chez <br> vous :</p>
                            <img src="images/france.png" width="80%" height="auto">
                            <label class="form-check-label" for="exampleCheck1" style="font-size:14px;margin-top:5px">Coordonnées, plan d'accès, horaires<br>d'ouvertures...</label><br>
                            <button type="button" class="btn btn-outline-primary" style="margin-bottom:15px;margin-top:10px">Trouver ma boutique <i class="fa-solid fa-angle-right"></i></button>
                        </div>
                        <div class="col-12 divRightMenu">
                            <p class="textRightMenu">Soldes :</p>
                            <img src="images/solde.png" width="80%" height="auto">
                            <label class="form-check-label" for="exampleCheck1" style="font-size:14px;margin-top:5px">Promo sur le coin des affaires !</label><br>
                            <button type="button" class="btn btn-outline-primary" style="margin-bottom:15px;margin-top:10px">Je fonce <i class="fa-solid fa-angle-right"></i></button>
                        </div>
                        <div class="col-12 divRightMenu">
                            <p class="textRightMenu">Les guides TechShop :</p>
                            <div class="row">
                                <div class="col-5">
                                    <img src="images/guide.png" width="80%" height="auto">
                                </div>
                                <div class="col-7" style="text-align:left">
                                    <label class="form-check-label" for="exampleCheck1" style="font-size:14px;margin-top:5px">La technologie <br> n'aura jamais été <br> aussi simple !</label>
                                </div>
                            </div>
                            <button type="button" class="btn btn-outline-primary" style="margin-bottom:15px;margin-top:10px">En savoir plus <i class="fa-solid fa-angle-right"></i></button>
                        </div>
                        <div class="col-12 divRightMenu">
                            <p class="textRightMenu">Rejoignez-nous :</p>
                            <img src="images/reseau.png" width="80%" height="auto" style="margin-bottom:50px">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-2">
        </div>
    </div>
</div>

<script>

    var src =  $('.carousel-inner div.active').find('img').prop('src');
    var canvas = document.createElement("canvas");
    var pic = new Image(); 
    pic.src = src; 
    canvas.width = pic.width;
    canvas.height = pic.height;
    var ctx = canvas.getContext("2d");
    ctx.drawImage(pic, 0, 0);
    var c = canvas.getContext('2d');
    var p = c.getImageData(7, 7, 1, 1).data;        
    $('body').css('backgroundColor',"rgb("+ p[0] +","+ p[1] +","+ p[2] +")");

    $('.carousel').bind('slide.bs.carousel', function (e) {
        var src = $(e.relatedTarget).find('img').prop('src');
        var canvas = document.createElement("canvas");
        var pic = new Image(); 
        pic.src = src; 
        canvas.width = pic.width;
        canvas.height = pic.height;
        var ctx = canvas.getContext("2d");
        ctx.drawImage(pic, 0, 0);
        var c = canvas.getContext('2d');
        var p = c.getImageData(7, 7, 1, 1).data;        
        $('body').css('backgroundColor',"rgb("+ p[0] +","+ p[1] +","+ p[2] +")");

    });

    
</script>

{% endblock %}
